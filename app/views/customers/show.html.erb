<div class="bg-primary-600 dark:bg-primary-800 p-2 sm:p-3 shadow-md flex flex-row flex-wrap items-center gap-2">
  <div class="flex flex-row">
    <%= link_to "<", customers_path, class: "mr-2 text-lg sm:text-xl font-medium text-white" %>
    <h1 class="text-lg sm:text-xl font-medium text-white"><%= @customer.name %></h1>
  </div>
  <div class="flex flex-row gap-2 ml-auto">
    <%= link_to "Edit Customer", edit_customer_path(@customer), class: "w-36 text-center text-gray-50 border-2 p-2 hover:bg-white hover:text-primary-600 border-white rounded-md text-sm font-medium hover:font-strong hover:shadow-md" %>
  </div>
</div>
<section id="customer-info">
  <div class="m-2 bg-white dark:bg-gray-800 sm:m-4 border rounded-md p-2 sm:p-4 flex flex-wrap justify-between text-sm gap-4 border-gray-300 dark:border-gray-500">
    <div>
      <h1 class="font-semibold">Customer</h1>
      <p><%= @customer.name %></p>
      <p><%= @customer.email %></p>
      <p><%= @customer.phone_number %></p>
    </div>
    <div>
      <h1 class="font-semibold">Address</h1>
      <p><%= @customer.address %></p>
      <p><%= @customer.city %></p>
      <p><%= @customer.state %>, <%= @customer.zip_code %></p>
    </div>
    <div>
      <h1 class="font-semibold">Point of contact</h1>
      <% if @customer.point_of_contact%>
        <p><%= @customer.point_of_contact.name %></p>
        <p><%= @customer.point_of_contact.phone_number %></p>
        <p><%= @customer.point_of_contact.email %></p>
      <% end %>
    </div>
  </div>
</section>
<div class="w-full flex justify-between mt-10 pl-4 pr-4">
  <div class="">
    <label class=" text-sm font-semibold text-center">Customer's service job list</label>
  </div>
  <div class="w-40 flex">
    <%= form_with(path: customer_path(@customer), method: 'get') do %>
      <div class="relative w-full sm:w-auto rounded overflow-visible h-9 text-center items-center flex justify-center">
        <%= select_tag 'filter_by',
        options_for_select(
          [["All statuses", ''],
          *ServiceJobStatusListHelper.service_job_statuses],
          selected: params[:filter_by],
        ),
        onchange: 'this.form.submit()',
        class: 'hover:cursor-pointer block w-full text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-400 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500'
      %>
      </div>
    <% end %>
  </div>
</div>
<div class="relative overflow-x-auto shadow-md sm:rounded-lg m-2 md:m-4">
  <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
    <thead class="text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400">
      <tr>
        <th scope="col" class="px-6 py-3">
          Job Number
        </th>
        <th scope="col" class="px-6 py-3">
          Status
        </th>
        <th scope="col" class="px-6 py-3">
          Client
        </th>
        <th scope="col" class="px-6 py-3">
          Work Site
        </th>
        <th scope="col" class="px-6 py-3">
          Action
        </th>
      </tr>
    </thead>
    <tbody>
      <% @customer_service_jobs.each do |service_job| %>
        <tr class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
          <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
            <%= service_job.job_number  %>
          </th>
          <td class="px-6 py-4">
            <%= service_job.status.capitalize.gsub("_", " ") %>
          </td>
          <td class="px-6 py-4">
            <%= service_job.customer.name %>
          </td>
          <td class="px-6 py-4">
            <% unless service_job.work_site.nil? %>
              <%= service_job.work_site.name  %>
            <% end %>
          </td>
          <td class="px-6 py-4">
            <%= link_to "View Job", service_job_path(service_job.id), class: "font-medium text-blue-600 dark:text-blue-500 hover:underline"%>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
