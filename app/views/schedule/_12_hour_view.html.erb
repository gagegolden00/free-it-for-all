<turbo_frame id="12HourView">
  <div class="p-2 md:p-4">
    <div class="flex flex-row">
      <% previous_day = (Date.parse(@selected_date) - 1).strftime('%Y-%m-%d') %>
      <% next_day = (Date.parse(@selected_date) + 1).strftime('%Y-%m-%d') %>
      <%= link_to schedule_path(selected_date: previous_day),  class: 'flex items-center' do %>
        <svg xmlns="http://www.w3.org/2000/svg" height="22" width="14" viewBox="0 0 256 512"><!--!Font Awesome Pro 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path fill="#7b7f7e" d="M54.6 256L144 166.6l0 178.7L54.6 256zM9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l128 128c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6l0-256c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-128 128z"/></svg>
      <% end %>
      <p class=" mx-1 text-gray-600 dark:text-gray-200 flex items-center"><%= content_tag(:span, Date.parse(@selected_date).strftime('%B %d, %Y'), class: "underline") %></p>
      <%= link_to schedule_path(selected_date: next_day), class: 'flex items-center' do %>
        <svg xmlns="http://www.w3.org/2000/svg" height="22" width="14" viewBox="0 0 256 512"><!--!Font Awesome Pro 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path fill="#7b7f7e" d="M201.4 256L112 166.6l0 178.7L201.4 256zm45.3-22.6c12.5 12.5 12.5 32.8 0 45.3l-128 128c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6l0-256c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l128 128z"/></svg>
      <% end %>
      <div class="ml-auto">
        <%= form_tag("/schedule", method: "get") do %>
          <%= date_field_tag :selected_date, @selected_date, onchange: "this.form.submit()", class: "w-36 h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block ps-2 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="overflow-x-scroll bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded mx-2 md:mx-4" style="display:grid; grid-template-columns: 200px">
    <div class="text-xs font-semibold bg-gray-300 dark:bg-gray-500 border-r border-gray-300 dark:border-gray-500">&nbsp;</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 2; grid-column-end: 6">7am</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 6; grid-column-end: 10">8am</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 10; grid-column-end: 14">9am</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 14; grid-column-end: 18">10am</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 18; grid-column-end: 22">11am</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 22; grid-column-end: 26">12am</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 26; grid-column-end: 30">1pm</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 30; grid-column-end: 34">2pm</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 34; grid-column-end: 38">3pm</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 38; grid-column-end: 42">4pm</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 42; grid-column-end: 46">5pm</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 46; grid-column-end: 50">6pm</div>
    <div class="text-xs text-center pl-1 font-semibold border-l border-b bg-gray-200 dark:bg-gray-900 border-gray-300 dark:border-gray-600 w-[150px]" style="grid-column-start: 50; grid-column-end: 54">7pm</div>
    <% current_name = nil %>
    <% total_colors = ScheduleHelper.color_list.length - 1 %>
    <% color_index  = 0 %>
    <% @daily_tech_schedule_data.each do |data| %>
      <% if current_name != data.name %>
        <div class="p-2 text-sm font font-semibold bg-gray-100 dark:bg-gray-900 border-r border-t border-gray-300 dark:border-gray-600" style="grid-column: 1">
          <%= data.name %>
        </div>
        <div>
          <% current_name = data.name %>
          <% color_index = (color_index == total_colors) ? 0 : color_index + 1 %>
        </div>
      <% end %>
      <% unless ScheduleHelper.get_12_hr_grid_col_value(data.start_time).nil? %>
        <div class="<%= ScheduleHelper.color_list[color_index]  %> text-white italic flex items-center p-1 m-1 rounded-sm shadow-md text-sm whitespace-nowrap text-ellipsis overflow-hidden"
          style="grid-column-start: <%= ScheduleHelper.get_12_hr_grid_col_value(data.start_time) %>; grid-column-end: <%= ScheduleHelper.get_12_hr_grid_col_value(data.end_time) %>">
          <% if data.start_time.hour < 7 %>
            <%= link_to 'View 24 hour schedule', "#", class: "hover:text-black mr-20" %>
          <% end %>
          <%= link_to schedule_path(user_service_job_id: data.user_service_job_id, display_modal: "true", user_id: data.user_id), data: {turbo_stream: true}, title: "#{data.customer_name}" do %>
            <span class="hover:text-black"><%= data.customer_name %></span>
            <span class=" pl-6"><%= data.start_time.strftime('%l:%M %p') %> - <%= data.end_time.strftime('%l:%M %p') %></span>
          <% end %>
        </div>
      <% end %>
    <% end %>
    <turbo_frame id="scheduleDetials">
    </turbo_frame>
  </div>
</turbo_frame>
